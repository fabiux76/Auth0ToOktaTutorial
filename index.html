<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>SPA SDK Sample</title>
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
  </head>

  <body>
    <h2>SPA Authentication Sample</h2>
    <p>Welcome to our page!</p>
    <button id="btn-login" disabled="true" onclick="login()">Log in</button>
    <button id="btn-logout" disabled="true" onclick="logout()">Log out</button>

    <!-- authMethod: form -->
    <!-- static signin form (authn and oie)-->
    <div
      id="static-signin-form"
      style="display: none"
      class="panel pure-form pure-form-aligned"
    >
      <div class="pure-control-group">
        <label for="username">Username</label>
        <input name="username" type="email" autocomplete="username" />
      </div>
      <div class="pure-control-group">
        <label for="password">Password</label>
        <input name="password" type="password" autocomplete="password" />
      </div>
      <div class="pure-controls">
        <a
          class="pure-button pure-button-primary"
          href="/"
          data-se="submit"
          onclick="_submitStaticSigninForm(event)"
          >Signin</a
        >
      </div>
    </div>

    <div id="mfa" style="display:none" class="panel pure-form-stacked">
      <div class="header">
        <!-- title is set dynamically -->
      </div>
    
      <div id="mfa-enroll" style="display: none">
    
        <div id="mfa-enroll-factors" style="display:none">
          <!-- factors are dynamically inserted here -->
        </div>
    
        <div id="mfa-enroll-question" style="display: none">
          <label for="questions">Choose a question:</label>
          <select name="questions">
            <!-- questions are dynamically inserted here -->
          </select>
          <label for="answer">Answer:</label>
          <input name="answer" type="text" class="pure-u-1-1" autocomplete="off"/>
        </div>
    
        <div id="mfa-enroll-phone" style="display: none">
          <label for="phone">Enter your phone number:<label>
          <input name="phone" type="text" class="pure-u-1-1" />
          <p>Include the country code, like: <b>+1-555-415-1337</b></p>
        </div>
    
      </div>
      
      <div id="mfa-enroll-activate" style="display: none">
        <div id="mfa-enroll-activate-okta-verify" style="display: none">
          <label for="qrcode">Open the Okta Verify app and scan this QR code</label>
          <div name="qrcode" class="qrcode panel">
            <!-- image is appended dynamically-->
          </div>
          <label for="passcode">Enter the code from the app:</label>
          <input name="passcode" type="text" autocomplete="off"/>
        </div>
        <div id="mfa-enroll-activate-phone" style="display: none">
          <label for="passcode">Enter the code:</label>
          <input name="passcode" type="text" autocomplete="off"/>
        </div>
      </div>
    
      <div id="mfa-required" style="display:none">
        <div id="mfa-required-factors" style="display: none">
          <!-- factors are dynamically inserted here -->
        </div>
      </div>
      
      <div id="mfa-challenge" style="display:none">
        <div id="mfa-challenge-okta-verify" style="display: none">
          <label for="passcode">Enter the code from the Okta Verify app:</label>
          <input name="passcode" type="text" autocomplete="off"/>
        </div>
    
        <div id="mfa-challenge-phone" style="display: none">
          <label for="passcode">Enter the code:</label>
          <input name="passcode" type="text" autocomplete="off"/>
        </div>
    
        <div id="mfa-challenge-question" style="display: none">
          <p><b class="question"><!-- questionText is set dynamically --></b></p>
          <label for="answer">Answer:</label><br/>
          <input name="answer" type="text" autocomplete="off" /><br/>
        </div>
    
        <div id="mfa-challenge-email" style="display: none">
          <label for="passcode">Enter the code:</label>
          <input name="passcode" type="text" autocomplete="off"/>
        </div>
    
      </div>
    
      <div id="authenticator-verification-data" style="display: none">
        <div id="authenticator-verification-data-phone" style="display: none">
          <label for="methodType">Select a method type:</label>
          <select name="methodType">
            <!-- methodTypes are dynamically inserted here -->
          </select>
        </div>
      </div>
    
      <div id="new-password-form" style="display: none">
        <label for="new-password">Enter new password:</label>
        <input id="new-password" name="new-password" type="password">
      </div>
    
      <div class="footer pure-controls">
        <a id="mfa-prev" href="/" onclick="_prevMfa(event)" class="pure-button">Go Back</a>
        <a id="mfa-cancel" href="/" onclick="_cancelMfa(event)" class="pure-button">Cancel</a>
        <a id="mfa-submit" href="/" style="display: none" onclick="_submitMfa(event)" class="pure-button pure-button-primary">Submit</a>
      </div>
    </div>

    <div class="hidden" id="gated-content">
      <p>
        You're seeing this content because you're currently
        <strong>logged in</strong>.
      </p>
      <label>
        Access token:
        <pre id="ipt-access-token"></pre>
      </label>
      <label>
        User profile:
        <pre id="ipt-user-profile"></pre>
      </label>
    </div>

    <button id="btn-call-api" disabled="true" onclick="callApi()">
      Call Local Api
    </button>
    <button
      id="btn-call-api-external"
      disabled="true"
      onclick="callExternallyHostedApi()"
    >
      Call PHP Api
    </button>

    <!-- Add a container to hold the response from the call -->
    <pre id="api-call-result"></pre>

    <script
      src="https://global.oktacdn.com/okta-auth-js/7.2.0/okta-auth-js.polyfill.js"
      type="text/javascript"
    ></script>
    <script
      src="https://global.oktacdn.com/okta-auth-js/7.2.0/okta-auth-js.min.js"
      type="text/javascript"
    ></script>

    <script src="js/app.js"></script>
  </body>
</html>
